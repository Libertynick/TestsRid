from selenium.webdriver.common.by import By


class AuthPageLocators:
    ORDER_NUMBER_INPUT = (By.XPATH, "//input[@name='orderNumber']")
    PIN_CODE_INPUT = (
    By.XPATH, "//input[@class='form-control border-gray fs-2 fs-md-3 text-center shadow-none px-0 py-2 p-md-0']")
    SUBMIT_BUTTON = (By.XPATH, "//button[@class='btn btn-primary w-100 w-md-auto p-3 fs-6 fw-bold']")


class BTPServicePageLocators:
    # Локаторы для попапов и модальных окон
    MODAL_DIALOG = (By.CSS_SELECTOR, "div.modal-dialog.modal-dialog-centered")
    SERVICE_BTP_ITEMS_DETAIL = (By.ID, "service-btp-items-detail")
    ACCORDION_MT4 = (By.CSS_SELECTOR, "div.accordion.mt-4")
    ACCORDION_COLLAPSE_SHOW = (By.CSS_SELECTOR, "div.accordion-collapse.show")
    POPUP_MATERIAL_TEXT = (By.CSS_SELECTOR, "div.text-gray")
    DETAILS_BUTTON = (By.CSS_SELECTOR, "span.details-button")  # Может потребоваться корректировка селектора

    # Дополнительные локаторы для закрытия попапа
    ESCAPE_KEY_TARGET = (By.TAG_NAME, "body")
    # Основные элементы страницы
    ORDER_NUMBER_HEADER = (By.XPATH, "//div[contains(text(), 'Номер заказа')]/following-sibling::div")
    #ORDER_STATUS_BLOCK = (By.XPATH, "//div[contains(@class, 'current-status')]")

    # Заголовок номера заказа
    ORDER_NUMBER_TITLE = (By.XPATH, "//div[@class='fs-5 fw-bold'][contains(text(), 'Номер заказа')]")

    # Локаторы для статусов заказа
    ORDER_STATUS_BLOCK = (By.XPATH, "//p[contains(text(), 'Актуальный статус заказа')]/following-sibling::ul[@class='list-unstyled']")
    LIST_UNSTYLED = (By.CSS_SELECTOR, "ul.list-unstyled")

    # Локаторы для основных контейнеров
    ACCORDION_CONTAINER = (By.CSS_SELECTOR, "div.accordion")
    BODY_ELEMENT = (By.TAG_NAME, "body")

    # Локаторы для деталей заказа
    DETAILS_LINK = (By.XPATH,
                    "//span[contains(@class, 'cursor-pointer') and contains(@class, 'text-danger') and contains(text(), 'подробнее')]")

    # Локаторы для индикаторов в заголовках
    ACCORDION_HEADER_INDICATORS = (By.CSS_SELECTOR,
                                   "div.accordion-header i.service-btp_icon--blue, " +
                                   "div.accordion-header i.service-btp_icon--green, " +
                                   "div.accordion-header i.service-btp_icon--gray, " +
                                   "div.accordion-header i[class*='blue'], " +
                                   "div.accordion-header i[class*='green'], " +
                                   "div.accordion-header i[class*='gray']")

    # Локаторы для текстовых элементов
    STATUS_TEXT_IN_HEADER = (By.CSS_SELECTOR, "div.fs-5, div.fw-bold")

    PARENT_ELEMENT = (By.XPATH, "./..")
    #ARTICLE_ITEM_ANCESTOR = (By.XPATH, "./ancestor::div[contains(@class, 'accordion-item')]")

    # Локатор для индикатора загрузки
    LOADING_SPINNER = (By.CSS_SELECTOR, ".loading-spinner")

    # Локаторы для статусов
    STATUS_ITEMS = (By.CSS_SELECTOR, "ul.list-unstyled li")

    # Локаторы для артикулов
    ARTICLE_BLOCKS = (By.XPATH, "//div[contains(@class, 'accordion-body')]")
    ARTICLE_NUMBER = (By.XPATH, "//div[contains(text(), 'Артикул')]/following-sibling::div")
    ARTICLE_ACCORDION_ITEMS = (By.CSS_SELECTOR, "div.accordion-item")
    ARTICLE_HEADERS = (By.CSS_SELECTOR, "div.fs-4.fw-bold")

    # Локаторы для аккордеонов
    ACCORDION_BUTTON = (By.CSS_SELECTOR, "div.accordion-button, button.accordion-button")
    ACCORDION_COLLAPSE = (By.CSS_SELECTOR, "div.accordion-collapse.collapse.show")

    # Локаторы для дополнительной информации артикула
    ADDITIONAL_INFO_BUTTON = (By.XPATH, "//button[contains(text(), 'Подробнее')]")

    # Локаторы для деталей артикула
    DELIVERY_NUMBER = (By.XPATH, ".//*[contains(text(), 'опоставка №') or contains(text(), 'Допоставка №')]")

    # Индикаторы статусов
    GREEN_INDICATORS = (By.CSS_SELECTOR, "i.service-btp_icon--green, svg.text-success, *[class*='green']")
    GRAY_INDICATORS = (By.CSS_SELECTOR, "i.service-btp_icon--gray, svg.text-secondary, *[class*='gray']")
    BLUE_INDICATORS = (By.CSS_SELECTOR, "i.service-btp_icon--blue, svg.text-primary, *[class*='blue']")
    STAGE_TEXT = (By.CSS_SELECTOR, ".d-flex.align-items-center.gap-3.mt-3 div:nth-child(2)")
    STAGE_PARENT = (By.XPATH, "./ancestor::div[contains(@class, 'd-flex')]")
    STAGE_TEXT_ELEMENTS = (By.XPATH, ".//*[text()]")

    # Оптимизированные локаторы для проверки материалов
    DETAILS_POPUP_BUTTON = (By.XPATH, "//span[contains(@class, 'cursor-pointer') and contains(@class, 'text-danger') and contains(text(), 'подробнее')]")
    POPUP_DIALOG = (By.CSS_SELECTOR, "div.modal-dialog.modal-dialog-centered")
    POPUP_ACCORDION_ITEMS = (By.CSS_SELECTOR, "div.accordion-item")
    POPUP_ACCORDION_BUTTON = (By.CSS_SELECTOR, "div.accordion-button")
    POPUP_ARTICLE_HEADERS = (By.CSS_SELECTOR, "div.fs-4.fw-bold")
    POPUP_MATERIAL_TEXT = (By.CSS_SELECTOR, "div.text-gray")
    POPUP_CLOSE_BUTTON = (By.CSS_SELECTOR, "button.btn-close")
    POPUP_ARTICLE_HEADER = (By.CSS_SELECTOR, "div.fs-4.fw-bold")
    DETAILS_BUTTON_WITH_ATTR = (By.CSS_SELECTOR, "span.cursor-pointer.text-danger.border-bottom[data-btp-detail]")
    POPUP_DIALOG_CENTERED = (By.CSS_SELECTOR, "div.modal-dialog.modal-dialog-centered")
    CLOSE_BUTTON_WITH_CLASS = (By.CSS_SELECTOR, "button.btn-close.fs-5")
    ACCORDION_BUTTON_WITH_ARIA = (By.CSS_SELECTOR, "div.accordion-button[aria-expanded]")


    # Новый локатор - регулярное выражение для извлечения кода материала
    POPUP_MATERIAL_NUMBER_PATTERN = r'\d+\.\s+(\w+)'

    # Локаторы для кнопок фото
    PHOTO_BUTTONS = (By.XPATH, "//button[contains(text(), 'Фото')]")

    # Локаторы для текста статуса и индикаторов
    STATUS_TEXT_ELEMENTS = (By.CSS_SELECTOR, "div.fs-5, div.fs-6, div")


    # Добавьте эти локаторы в класс BTPServicePageLocators в файле btp_service_btp_service_locators.py

    # Кнопка аккордеона с точным классом
    ARTICLE_ACCORDION_BUTTON = (By.CSS_SELECTOR, "div.accordion-button.accordion-button_arrow-xl.cursor-pointer")

    # Элемент содержимого аккордеона
    ARTICLE_ACCORDION_COLLAPSE = (By.CSS_SELECTOR, "div.accordion-collapse")

    # Локаторы для индикаторов статусов
    BLUE_INDICATOR = (By.CSS_SELECTOR, "i.service-btp_icon--blue, svg.text-primary, *[class*='blue']")
    GREEN_INDICATOR = (By.CSS_SELECTOR, "i.service-btp_icon--green, svg.text-success, *[class*='green']")
    GRAY_INDICATOR = (By.CSS_SELECTOR, "i.service-btp_icon--gray, svg.text-secondary, *[class*='gray']")

    DELIVERY_POPUP_LINKS = (By.CSS_SELECTOR, "span.cursor-pointer.text-danger.border-bottom[data-bs-toggle='modal']")
    DELIVERY_POPUP_TITLE = (By.CSS_SELECTOR, "h4.modal-title")

    # Локаторы для поиска текста статуса
    STATUS_TEXT_CONTAINER = (
    By.XPATH, "./div[contains(@class, 'fs-5') or contains(@class, 'fs-6') or contains(@class, 'text-gray')]")

    # Локатор для родительского элемента статуса (используется при получении текста)
    STATUS_PARENT_CONTAINER = (By.XPATH, "./parent::div[contains(@class, 'd-flex')]")

    # Локаторы для определения наличия статусов у артикула
    ARTICLE_STATUSES = (By.CSS_SELECTOR, "div.d-flex.align-items-center.gap-3.mt-3")

    ALL_ARTICLE_STATUSES = (By.CSS_SELECTOR, "div.accordion-item")
    ARTICLE_TITLE = (By.CSS_SELECTOR, "div.fs-4.fw-bold")
    ARTICLE_STATUS_CONTAINER = (By.CSS_SELECTOR, "div.d-flex.align-items-center.gap-3.mt-3")
    ARTICLE_STATUS_TEXT = (By.CSS_SELECTOR, "div.fs-5, div.fs-6")

    # Локаторы для быстрой проверки фото и доставки
    PHOTO_BUTTON = (By.XPATH, ".//button[contains(text(), 'Фото')]")
    DELIVERY_NUMBER_ELEMENT = (By.XPATH, ".//*[contains(text(), 'опоставка №') or contains(text(), 'Допоставка №')]")
