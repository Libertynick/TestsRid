import allure

from base_page.base_page import BasePage
from open_pages.product_page.product_page_locators import ProductPageLocators
from open_pages.searching_results_page.searching_results_locators import SearchingResultsLocators


@allure.feature('Страница Результаты поиска')
class SearchingResultsPage(BasePage):
    """Страница Результаты поиска"""

    def go_to_product_page(self, article: str):
        """Переход на страницу товара"""
        with allure.step(''):
            self.waiting_element_is_visibility_on_the_page(SearchingResultsLocators.LOCATOR_LINK_TO_PRODUCT, sec=5)
            link_product_page = self.find_element(SearchingResultsLocators.LOCATOR_LINK_TO_PRODUCT)
            link_product_page.click()
            self.waiting_element_is_visibility_on_the_page(ProductPageLocators.LOCATOR_H1_HEADER, sec=30)
            article_on_product_page = self.find_element(ProductPageLocators.LOCATOR_ARTICLE).text
            assert article_on_product_page == article, \
                f'Артикул на странице продукта - ({article_on_product_page}) не соответствует ожидаемому - ({article})'
